This is a reimplementation of the faction AI.